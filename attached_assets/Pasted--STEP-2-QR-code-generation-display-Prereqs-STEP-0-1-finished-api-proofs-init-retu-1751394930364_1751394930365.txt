üéØ **STEP 2 ‚Äì QR code generation + display**

Prereqs  
‚Ä¢ STEP 0/1 finished: `/api/proofs/init` returns `{proofId}` and Launch/Public routes render the form.  
‚Ä¢ `config.orbit.useRealOrbit` flag exists (ENV `ORBIT_USE_REAL`, default **false**).

Goal (one commit)  
1. Backend `GET /api/proofs/:id/qr`  
   ‚Ä¢ Params: `id = proofId`  
   ‚Ä¢ **If `useRealOrbit=true`** call Orbit ‚ÄúPrepare URL for Proof Request‚Äù ‚Üí returns `{ invitationUrl }`.  
   ‚Ä¢ **Else** return `{ invitationUrl: 'https://example.org/mock/'+id }`.  
   ‚Ä¢ Generate **SVG QR** with `qrcode` package (already in repo? if not: `pnpm -w add qrcode-svg`) using the invitation URL.  
   ‚Ä¢ Respond `200 image/svg+xml`.  
   ‚Ä¢ **Cache** in memory (`Map<string,{svg,exp}>`) for 5 min to avoid repeat Orbit calls.

2. Frontend components  
   **/web/components/VerificationPanel.tsx** (new)  
   ‚Ä¢ Props: `{ proofId: string }`.  
   ‚Ä¢ `react-query` fetch to `/api/proofs/${proofId}/qr`.  
   ‚Ä¢ While loading ‚Üí show spinner in a 250px square.  
   ‚Ä¢ On success ‚Üí render `<img src={"data:image/svg+xml;utf8,"+encodeURIComponent(svg)} ‚Ä¶>` (style 250 √ó 250, rounded borders).  
   ‚Ä¢ Below QR: **Open in Wallet** button (`<a href={invitationUrl} target="_blank">`).  
   ‚Ä¢ Provide ‚ÄúCancel verification‚Äù that just hides the panel (no proof cancel yet).

3. Integrate panel  
   ‚Ä¢ In **FormLaunchPage.tsx** (and PublicFormPage if you duplicated):  
     ‚Äì When form has VC fields AND proofId state exists (created via `/api/proofs/init`) render `<VerificationPanel proofId={proofId} />` to the right of the form (flex row).  
     ‚Äì Until proofId fetched, show ‚ÄúPreparing verification‚Ä¶‚Äù skeleton.

4. UX polish  
   ‚Ä¢ If any fetch errors ‚Üí show red bordered box ‚ÄúCould not generate verification QR ‚Äì try again‚Äù.

5. Tests  
   ‚úÖ `curl http://localhost:5000/api/proofs/mock123/qr` returns SVG (starts with `<svg`).  
   ‚úÖ Launch **KYC TEST** ‚Üí QR square appears with mock pattern; ‚ÄúOpen in Wallet‚Äù opens link.  
   ‚úÖ Refresh page quickly ‚Üí server uses cached SVG (check backend log once).

6. Changelog (`replit.md`)  
2025-07-01
Step 2 ‚Äì added /api/proofs/:id/qr with 5-min cache

New VerificationPanel displays real QR + wallet link on Launch/Public pages